{"numFailedTestSuites":7,"numFailedTests":108,"numPassedTestSuites":3,"numPassedTests":93,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":10,"numTotalTests":201,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1768551247230,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["SubscriptionService","getPlanConfig"],"duration":3,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.planConfiguration (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:64:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService getPlanConfig should return database config when available","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return database config when available"},{"ancestorTitles":["SubscriptionService","getPlanConfig"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.planConfiguration (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:74:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService getPlanConfig should fall back to defaults when database config unavailable","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fall back to defaults when database config unavailable"},{"ancestorTitles":["SubscriptionService","getPlanConfig"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.planConfiguration (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:85:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService getPlanConfig should return FREE plan config","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return FREE plan config"},{"ancestorTitles":["SubscriptionService","getSubscriptionDetails"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:113:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService getSubscriptionDetails should return complete subscription details","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return complete subscription details"},{"ancestorTitles":["SubscriptionService","getSubscriptionDetails"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:140:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService getSubscriptionDetails should indicate upgrade capability for non-PREMIUM plans","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should indicate upgrade capability for non-PREMIUM plans"},{"ancestorTitles":["SubscriptionService","getSubscriptionDetails"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:162:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService getSubscriptionDetails should indicate no downgrade for FREE plan","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should indicate no downgrade for FREE plan"},{"ancestorTitles":["SubscriptionService","getSubscriptionDetails"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:171:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService getSubscriptionDetails should throw NotFoundError for non-existent tenant","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw NotFoundError for non-existent tenant"},{"ancestorTitles":["SubscriptionService","startTrial"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:183:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService startTrial should start trial with default 30 days","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should start trial with default 30 days"},{"ancestorTitles":["SubscriptionService","startTrial"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:202:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService startTrial should start trial with custom duration","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should start trial with custom duration"},{"ancestorTitles":["SubscriptionService","startTrial"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:216:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService startTrial should record trial start in subscription history","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should record trial start in subscription history"},{"ancestorTitles":["SubscriptionService","endTrial"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:242:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService endTrial should end trial and convert to specified plan","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should end trial and convert to specified plan"},{"ancestorTitles":["SubscriptionService","endTrial"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:265:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService endTrial should default to FREE plan if no conversion plan specified","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should default to FREE plan if no conversion plan specified"},{"ancestorTitles":["SubscriptionService","endTrial"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:286:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService endTrial should throw error if tenant not in trial","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw error if tenant not in trial"},{"ancestorTitles":["SubscriptionService","calculateProration"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"SubscriptionService calculateProration should calculate proration for mid-cycle upgrade","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should calculate proration for mid-cycle upgrade"},{"ancestorTitles":["SubscriptionService","calculateProration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SubscriptionService calculateProration should calculate credit for downgrade","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should calculate credit for downgrade"},{"ancestorTitles":["SubscriptionService","calculateProration"],"duration":3,"failureDetails":[{"matcherResult":{"actual":366,"expected":365,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m365\u001b[39m\nReceived: \u001b[31m366\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m365\u001b[39m\nReceived: \u001b[31m366\u001b[39m\n    at Object.toBe (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:371:32)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService calculateProration should handle yearly billing cycle","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should handle yearly billing cycle"},{"ancestorTitles":["SubscriptionService","calculateProration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SubscriptionService calculateProration should never return negative credit","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should never return negative credit"},{"ancestorTitles":["SubscriptionService","changePlan"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:417:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService changePlan should upgrade plan successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should upgrade plan successfully"},{"ancestorTitles":["SubscriptionService","changePlan"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:459:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService changePlan should downgrade plan successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should downgrade plan successfully"},{"ancestorTitles":["SubscriptionService","changePlan"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:491:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService changePlan should reject change to same plan","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject change to same plan"},{"ancestorTitles":["SubscriptionService","changePlan"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:513:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService changePlan should apply proration when requested","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply proration when requested"},{"ancestorTitles":["SubscriptionService","changePlan"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:550:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService changePlan should change billing cycle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should change billing cycle"},{"ancestorTitles":["SubscriptionService","cancelSubscription"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:584:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService cancelSubscription should cancel subscription immediately","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should cancel subscription immediately"},{"ancestorTitles":["SubscriptionService","cancelSubscription"],"duration":3,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:614:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService cancelSubscription should cancel at end of billing period","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should cancel at end of billing period"},{"ancestorTitles":["SubscriptionService","reactivateSubscription"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:649:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService reactivateSubscription should reactivate canceled subscription","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reactivate canceled subscription"},{"ancestorTitles":["SubscriptionService","reactivateSubscription"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:675:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService reactivateSubscription should throw error if subscription not canceled","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw error if subscription not canceled"},{"ancestorTitles":["SubscriptionService","renewSubscription"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:697:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService renewSubscription should renew subscription successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should renew subscription successfully"},{"ancestorTitles":["SubscriptionService","renewSubscription"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:726:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService renewSubscription should throw error if autoRenew is disabled","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw error if autoRenew is disabled"},{"ancestorTitles":["SubscriptionService","renewSubscription"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:746:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService renewSubscription should use yearly price for yearly billing cycle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use yearly price for yearly billing cycle"},{"ancestorTitles":["SubscriptionService","validatePlanLimits"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:777:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService validatePlanLimits should pass validation when within limits","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should pass validation when within limits"},{"ancestorTitles":["SubscriptionService","validatePlanLimits"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:799:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService validatePlanLimits should detect vehicle limit violation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect vehicle limit violation"},{"ancestorTitles":["SubscriptionService","validatePlanLimits"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:820:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService validatePlanLimits should detect multiple violations","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect multiple violations"},{"ancestorTitles":["SubscriptionService","validatePlanLimits"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts:844:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SubscriptionService validatePlanLimits should allow unlimited for PREMIUM plan","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow unlimited for PREMIUM plan"}],"endTime":1768551249000,"message":"\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  getPlanConfig  should return database config when available\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 62 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 63 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 64 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockConfig)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 65 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 66 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mgetPlanConfig(\u001b[32m'PREMIUM'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 67 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.planConfiguration (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:64:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  getPlanConfig  should fall back to defaults when database config unavailable\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m     it(\u001b[32m'should fall back to defaults when database config unavailable'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 74 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 75 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 76 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mgetPlanConfig(\u001b[32m'BASIC'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 77 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.planConfiguration (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:74:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  getPlanConfig  should return FREE plan config\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 83 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 84 |\u001b[39m     it(\u001b[32m'should return FREE plan config'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 85 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 87 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mgetPlanConfig(\u001b[32m'FREE'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 88 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.planConfiguration (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:85:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  getSubscriptionDetails  should return complete subscription details\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 111 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 112 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 113 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 114 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 115 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mgetSubscriptionDetails(tenantId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 116 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:113:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  getSubscriptionDetails  should indicate upgrade capability for non-PREMIUM plans\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 138 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 139 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 140 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 141 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 142 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mgetSubscriptionDetails(\u001b[32m'tenant-123'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 143 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:140:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  getSubscriptionDetails  should indicate no downgrade for FREE plan\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 160 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 161 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 162 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 163 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 164 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mgetSubscriptionDetails(\u001b[32m'tenant-123'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 165 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:162:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  getSubscriptionDetails  should throw NotFoundError for non-existent tenant\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 169 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 170 |\u001b[39m     it(\u001b[32m'should throw NotFoundError for non-existent tenant'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 171 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 172 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 173 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 174 |\u001b[39m         subscriptionService\u001b[33m.\u001b[39mgetSubscriptionDetails(\u001b[32m'invalid-id'\u001b[39m)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:171:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  startTrial  should start trial with default 30 days\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 181 |\u001b[39m       \u001b[36mconst\u001b[39m tenantId \u001b[33m=\u001b[39m \u001b[32m'tenant-123'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 182 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 183 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 184 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 185 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 186 |\u001b[39m       \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mstartTrial(tenantId)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:183:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  startTrial  should start trial with custom duration\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 200 |\u001b[39m       \u001b[36mconst\u001b[39m tenantId \u001b[33m=\u001b[39m \u001b[32m'tenant-123'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 201 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 202 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 203 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 204 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 205 |\u001b[39m       \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mstartTrial(tenantId\u001b[33m,\u001b[39m \u001b[35m14\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 14-day trial\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:202:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  startTrial  should record trial start in subscription history\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 214 |\u001b[39m       \u001b[36mconst\u001b[39m tenantId \u001b[33m=\u001b[39m \u001b[32m'tenant-123'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 215 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 216 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 217 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 218 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 219 |\u001b[39m       \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mstartTrial(tenantId)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:216:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  endTrial  should end trial and convert to specified plan\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 240 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 241 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 242 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 243 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 244 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 245 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:242:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  endTrial  should default to FREE plan if no conversion plan specified\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 263 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 264 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 265 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 266 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 267 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 268 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:265:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  endTrial  should throw error if tenant not in trial\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 284 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 285 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 286 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 287 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 288 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 289 |\u001b[39m         subscriptionService\u001b[33m.\u001b[39mendTrial(\u001b[32m'tenant-123'\u001b[39m)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:286:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  calculateProration  should handle yearly billing cycle\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m365\u001b[39m\n    Received: \u001b[31m366\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 369 |\u001b[39m       \u001b[90m// BASIC yearly: $299.90/12 = $24.99/month, PREMIUM yearly: $999.90/12 = $83.33/month\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 370 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdaysRemaining)\u001b[33m.\u001b[39mtoBe(\u001b[35m184\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 371 |\u001b[39m       expect(result\u001b[33m.\u001b[39mtotalDays)\u001b[33m.\u001b[39mtoBe(\u001b[35m365\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 372 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 373 |\u001b[39m       jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 374 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:371:32)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  changePlan  should upgrade plan successfully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 415 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 416 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 417 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 418 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 419 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 420 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:417:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  changePlan  should downgrade plan successfully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 457 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 458 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 459 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 460 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 461 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 462 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:459:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  changePlan  should reject change to same plan\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 489 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 490 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 491 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 492 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 493 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 494 |\u001b[39m         subscriptionService\u001b[33m.\u001b[39mchangePlan(\u001b[32m'tenant-123'\u001b[39m\u001b[33m,\u001b[39m { targetPlan\u001b[33m:\u001b[39m \u001b[32m'BASIC'\u001b[39m }\u001b[33m,\u001b[39m \u001b[32m'user-1'\u001b[39m)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:491:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  changePlan  should apply proration when requested\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 511 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 512 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 513 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 514 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 515 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 516 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:513:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  changePlan  should change billing cycle\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 548 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 549 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 550 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 551 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 552 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 553 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:550:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  cancelSubscription  should cancel subscription immediately\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 582 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 583 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 584 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 585 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 586 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 587 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:584:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  cancelSubscription  should cancel at end of billing period\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 612 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 613 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 614 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 615 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 616 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 617 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:614:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  reactivateSubscription  should reactivate canceled subscription\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 647 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 648 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 649 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 650 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 651 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 652 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:649:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  reactivateSubscription  should throw error if subscription not canceled\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 673 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 674 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 675 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 676 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 677 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 678 |\u001b[39m         subscriptionService\u001b[33m.\u001b[39mreactivateSubscription(\u001b[32m'tenant-123'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'BASIC'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'user-1'\u001b[39m)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:675:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  renewSubscription  should renew subscription successfully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 695 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 696 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 697 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 698 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 699 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 700 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:697:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  renewSubscription  should throw error if autoRenew is disabled\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 724 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 725 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 726 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 727 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 728 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 729 |\u001b[39m         subscriptionService\u001b[33m.\u001b[39mrenewSubscription(\u001b[32m'tenant-123'\u001b[39m)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:726:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  renewSubscription  should use yearly price for yearly billing cycle\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 744 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 745 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 746 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 747 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 748 |\u001b[39m       (prisma\u001b[33m.\u001b[39msubscriptionHistory\u001b[33m.\u001b[39mcreate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 749 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:746:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  validatePlanLimits  should pass validation when within limits\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 775 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 776 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 777 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 778 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 779 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 780 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mvalidatePlanLimits(tenantId)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:777:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  validatePlanLimits  should detect vehicle limit violation\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 797 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 798 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 799 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 800 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 801 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 802 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mvalidatePlanLimits(tenantId)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:799:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  validatePlanLimits  should detect multiple violations\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 818 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 819 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 820 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 821 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 822 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 823 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mvalidatePlanLimits(tenantId)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:820:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSubscriptionService  validatePlanLimits  should allow unlimited for PREMIUM plan\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 842 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 843 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 844 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 845 |\u001b[39m       (prisma\u001b[33m.\u001b[39mplanConfiguration\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 846 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 847 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m subscriptionService\u001b[33m.\u001b[39mvalidatePlanLimits(tenantId)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/subscription.service.test.ts\u001b[39m\u001b[0m\u001b[2m:844:15)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\subscription.service.test.ts","startTime":1768551248077,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["FinancialService","createExpense"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService createExpense should create expense successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create expense successfully"},{"ancestorTitles":["FinancialService","createExpense"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService createExpense should reject negative expense amount","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject negative expense amount"},{"ancestorTitles":["FinancialService","createExpense"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService createExpense should reject zero expense amount","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject zero expense amount"},{"ancestorTitles":["FinancialService","createExpense"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService createExpense should throw NotFoundError for invalid vehicle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw NotFoundError for invalid vehicle"},{"ancestorTitles":["FinancialService","createExpense"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService createExpense should create expense without vehicle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create expense without vehicle"},{"ancestorTitles":["FinancialService","createIncome"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService createIncome should create income successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create income successfully"},{"ancestorTitles":["FinancialService","createIncome"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService createIncome should reject negative income amount","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject negative income amount"},{"ancestorTitles":["FinancialService","createIncome"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService createIncome should reject zero income amount","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject zero income amount"},{"ancestorTitles":["FinancialService","getExpenses"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getExpenses should return paginated expenses","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return paginated expenses"},{"ancestorTitles":["FinancialService","getExpenses"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getExpenses should filter by category","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by category"},{"ancestorTitles":["FinancialService","getExpenses"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getExpenses should filter by status","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by status"},{"ancestorTitles":["FinancialService","getExpenses"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getExpenses should filter by date range","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by date range"},{"ancestorTitles":["FinancialService","getExpenses"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getExpenses should filter by amount range","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by amount range"},{"ancestorTitles":["FinancialService","approveExpense"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService approveExpense should approve expense successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should approve expense successfully"},{"ancestorTitles":["FinancialService","rejectExpense"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService rejectExpense should reject expense successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject expense successfully"},{"ancestorTitles":["FinancialService","getProfitLossReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getProfitLossReport should calculate profit correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate profit correctly"},{"ancestorTitles":["FinancialService","getProfitLossReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getProfitLossReport should calculate loss correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate loss correctly"},{"ancestorTitles":["FinancialService","getProfitLossReport"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getProfitLossReport should handle zero income gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle zero income gracefully"},{"ancestorTitles":["FinancialService","getProfitLossReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getProfitLossReport should only include approved expenses","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should only include approved expenses"},{"ancestorTitles":["FinancialService","getProfitLossReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getProfitLossReport should group income by source","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should group income by source"},{"ancestorTitles":["FinancialService","getProfitLossReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getProfitLossReport should group expenses by category","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should group expenses by category"},{"ancestorTitles":["FinancialService","getCashFlowReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getCashFlowReport should calculate cash flow correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate cash flow correctly"},{"ancestorTitles":["FinancialService","getCashFlowReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getCashFlowReport should group cash flow by day","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should group cash flow by day"},{"ancestorTitles":["FinancialService","getCashFlowReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getCashFlowReport should sort daily cash flow by date","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should sort daily cash flow by date"},{"ancestorTitles":["FinancialService","getCashFlowReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getCashFlowReport should default opening balance to zero","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should default opening balance to zero"},{"ancestorTitles":["FinancialService","getFinancialSummary"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getFinancialSummary should return complete financial summary","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return complete financial summary"},{"ancestorTitles":["FinancialService","getVehicleProfitability"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getVehicleProfitability should calculate vehicle profitability correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate vehicle profitability correctly"},{"ancestorTitles":["FinancialService","getVehicleProfitability"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getVehicleProfitability should handle unprofitable vehicles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle unprofitable vehicles"},{"ancestorTitles":["FinancialService","getVehicleProfitability"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getVehicleProfitability should handle zero income gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle zero income gracefully"},{"ancestorTitles":["FinancialService","getVehicleProfitability"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at $extends (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\lib\\get-tenant-prisma.ts:95:29)\n    at new FinancialService (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\src\\services\\financial.service.ts:86:45)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts:58:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"FinancialService getVehicleProfitability should only include approved expenses","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should only include approved expenses"}],"endTime":1768551249355,"message":"\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  createExpense  should create expense successfully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  createExpense  should reject negative expense amount\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  createExpense  should reject zero expense amount\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  createExpense  should throw NotFoundError for invalid vehicle\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  createExpense  should create expense without vehicle\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  createIncome  should create income successfully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  createIncome  should reject negative income amount\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  createIncome  should reject zero income amount\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getExpenses  should return paginated expenses\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getExpenses  should filter by category\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getExpenses  should filter by status\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getExpenses  should filter by date range\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getExpenses  should filter by amount range\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  approveExpense  should approve expense successfully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  rejectExpense  should reject expense successfully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getProfitLossReport  should calculate profit correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getProfitLossReport  should calculate loss correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getProfitLossReport  should handle zero income gracefully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getProfitLossReport  should only include approved expenses\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getProfitLossReport  should group income by source\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getProfitLossReport  should group expenses by category\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getCashFlowReport  should calculate cash flow correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getCashFlowReport  should group cash flow by day\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getCashFlowReport  should sort daily cash flow by date\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getCashFlowReport  should default opening balance to zero\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getFinancialSummary  should return complete financial summary\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getVehicleProfitability  should calculate vehicle profitability correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getVehicleProfitability  should handle unprofitable vehicles\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getVehicleProfitability  should handle zero income gracefully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mFinancialService  getVehicleProfitability  should only include approved expenses\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m   \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mextendedPrisma) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m     extendedPrisma \u001b[33m=\u001b[39m prisma\u001b[33m.\u001b[39m$extends(tenantExtension(tenantId)) \u001b[36mas\u001b[39m \u001b[33mExtendedPrismaClient\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m     tenantPrismaCache\u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(tenantId\u001b[33m,\u001b[39m extendedPrisma)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m     apiLogger\u001b[33m.\u001b[39mdebug({ tenantId\u001b[33m,\u001b[39m cacheSize\u001b[33m:\u001b[39m tenantPrismaCache\u001b[33m.\u001b[39msize() }\u001b[33m,\u001b[39m \u001b[32m'Created tenant Prisma client'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m   }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat $extends (\u001b[22m\u001b[2msrc/lib/get-tenant-prisma.ts\u001b[2m:95:29)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new FinancialService (\u001b[22m\u001b[2msrc/services/financial.service.ts\u001b[2m:86:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/financial.service.test.ts\u001b[39m\u001b[0m\u001b[2m:58:24)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\financial.service.test.ts","startTime":1768551249027,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["SQL Injection Prevention (VULN-001)","setTenantContext"],"duration":1,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) setTenantContext should reject malicious SQL injection attempts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject malicious SQL injection attempts"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","setTenantContext"],"duration":1,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) setTenantContext should reject path traversal attempts in tenant ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject path traversal attempts in tenant ID"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","setTenantContext"],"duration":0,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) setTenantContext should reject XSS attempts in tenant ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject XSS attempts in tenant ID"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","setTenantContext"],"duration":0,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) setTenantContext should reject tenant IDs that are too short","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject tenant IDs that are too short"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","setTenantContext"],"duration":0,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) setTenantContext should reject tenant IDs with invalid characters","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject tenant IDs with invalid characters"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","setTenantContext"],"duration":0,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) setTenantContext should accept valid CUID tenant IDs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept valid CUID tenant IDs"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","setTenantContext"],"duration":0,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) setTenantContext should use parameterized queries (not string concatenation)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use parameterized queries (not string concatenation)"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","setTenantContext"],"duration":0,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) setTenantContext should handle super admin flag correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle super admin flag correctly"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","setTenantContext"],"duration":1,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) setTenantContext should not allow boolean SQL injection in super admin flag","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not allow boolean SQL injection in super admin flag"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","getTenantId"],"duration":0,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) getTenantId should return null when no tenant context is set","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return null when no tenant context is set"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","getTenantId"],"duration":0,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) getTenantId should return correct tenant ID after setting context","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return correct tenant ID after setting context"},{"ancestorTitles":["SQL Injection Prevention (VULN-001)","getTenantId"],"duration":0,"failureDetails":[{},{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:11:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)","Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\setup\\test-db.ts:20:16)\n    at Object.<anonymous> (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts:15:26)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:254:5)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"SQL Injection Prevention (VULN-001) getTenantId should use safe $queryRaw instead of $queryRawUnsafe","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use safe $queryRaw instead of $queryRawUnsafe"}],"endTime":1768551249643,"message":"\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject malicious SQL injection attempts\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject malicious SQL injection attempts\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject path traversal attempts in tenant ID\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject path traversal attempts in tenant ID\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject XSS attempts in tenant ID\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject XSS attempts in tenant ID\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject tenant IDs that are too short\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject tenant IDs that are too short\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject tenant IDs with invalid characters\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should reject tenant IDs with invalid characters\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should accept valid CUID tenant IDs\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should accept valid CUID tenant IDs\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should use parameterized queries (not string concatenation)\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should use parameterized queries (not string concatenation)\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should handle super admin flag correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should handle super admin flag correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should not allow boolean SQL injection in super admin flag\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  setTenantContext  should not allow boolean SQL injection in super admin flag\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  getTenantId  should return null when no tenant context is set\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  getTenantId  should return null when no tenant context is set\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  getTenantId  should return correct tenant ID after setting context\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  getTenantId  should return correct tenant ID after setting context\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  getTenantId  should use safe $queryRaw instead of $queryRawUnsafe\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:11:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mSQL Injection Prevention (VULN-001)  getTenantId  should use safe $queryRaw instead of $queryRawUnsafe\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 18 |\u001b[39m \u001b[36mexport\u001b[39m \u001b[36masync\u001b[39m \u001b[36mfunction\u001b[39m cleanupDatabase() {\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   \u001b[90m// Delete in reverse order of dependencies\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 20 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mpayment\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39minvoice\u001b[33m.\u001b[39mdeleteMany()\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m   \u001b[36mawait\u001b[39m prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mdeleteMany()\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat auditLog (\u001b[22m\u001b[2mtests/setup/test-db.ts\u001b[2m:20:16)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/tenant.test.ts\u001b[39m\u001b[0m\u001b[2m:15:26)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\tenant.test.ts","startTime":1768551249377,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Payment Amount Validation (VULN-005)","Integer (Cents) Comparison"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Integer (Cents) Comparison should reject payment with 1 cent difference","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should reject payment with 1 cent difference"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Integer (Cents) Comparison"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Integer (Cents) Comparison should accept payment with exact match","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should accept payment with exact match"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Integer (Cents) Comparison"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Integer (Cents) Comparison should handle floating point precision correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle floating point precision correctly"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Integer (Cents) Comparison"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Integer (Cents) Comparison should reject manipulation attempts","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should reject manipulation attempts"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Integer (Cents) Comparison"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Integer (Cents) Comparison should handle large amounts correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle large amounts correctly"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Integer (Cents) Comparison"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Integer (Cents) Comparison should handle decimal precision edge cases","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle decimal precision edge cases"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Old Floating-Point Method (Insecure)"],"duration":1,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at Object.toBe (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\payment-validation.test.ts:103:31)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Payment Amount Validation (VULN-005) Old Floating-Point Method (Insecure) should demonstrate why tolerance-based comparison is insecure","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should demonstrate why tolerance-based comparison is insecure"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Old Floating-Point Method (Insecure)"],"duration":1,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at Object.toBe (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\payment-validation.test.ts:127:35)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Payment Amount Validation (VULN-005) Old Floating-Point Method (Insecure) should show tolerance allows payment manipulation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should show tolerance allows payment manipulation"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Rounding Behavior"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Rounding Behavior should round consistently","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should round consistently"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Rounding Behavior"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Rounding Behavior should handle negative amounts (refunds)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle negative amounts (refunds)"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Rounding Behavior"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Rounding Behavior should reject negative amount manipulation","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reject negative amount manipulation"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Real-World Payment Scenarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Real-World Payment Scenarios should validate invoice payment scenarios","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should validate invoice payment scenarios"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Real-World Payment Scenarios"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Real-World Payment Scenarios should handle multiple currency decimal places","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle multiple currency decimal places"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Error Message Generation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payment Amount Validation (VULN-005) Error Message Generation should generate detailed error messages with cents","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate detailed error messages with cents"},{"ancestorTitles":["Payment Amount Validation (VULN-005)","Metadata for Forensics"],"duration":0,"failureDetails":[{}],"failureMessages":["ReferenceError: expectedAmountCents is not defined\n    at Object.expectedAmountCents (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\payment-validation.test.ts:235:9)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Payment Amount Validation (VULN-005) Metadata for Forensics should store mismatch detection data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should store mismatch detection data"}],"endTime":1768551249875,"message":"\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mPayment Amount Validation (VULN-005)  Old Floating-Point Method (Insecure)  should demonstrate why tolerance-based comparison is insecure\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mfalse\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 101 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 102 |\u001b[39m       \u001b[90m// This would INCORRECTLY pass with 0.01 tolerance\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 103 |\u001b[39m       expect(oldMethodPasses)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// BAD!\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 104 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 105 |\u001b[39m       \u001b[90m// New method: exact cents comparison (SECURE)\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 106 |\u001b[39m       \u001b[36mconst\u001b[39m expectedCents \u001b[33m=\u001b[39m \u001b[33mMath\u001b[39m\u001b[33m.\u001b[39mround(expected \u001b[33m*\u001b[39m \u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/payment-validation.test.ts\u001b[39m\u001b[0m\u001b[2m:103:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mPayment Amount Validation (VULN-005)  Old Floating-Point Method (Insecure)  should show tolerance allows payment manipulation\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mfalse\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 125 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 126 |\u001b[39m         \u001b[90m// Old method would allow this\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 127 |\u001b[39m         expect(diff \u001b[33m<=\u001b[39m tolerance)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 128 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 129 |\u001b[39m         \u001b[90m// But attacker saves money\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 130 |\u001b[39m         expect(expected \u001b[33m-\u001b[39m paid)\u001b[33m.\u001b[39mtoBe(saved)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/payment-validation.test.ts\u001b[39m\u001b[0m\u001b[2m:127:35)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mPayment Amount Validation (VULN-005)  Metadata for Forensics  should store mismatch detection data\u001b[39m\u001b[22m\n\n    ReferenceError: expectedAmountCents is not defined\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 233 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 234 |\u001b[39m       \u001b[36mconst\u001b[39m metadata \u001b[33m=\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 235 |\u001b[39m         expectedAmountCents\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 236 |\u001b[39m         paidAmountCents\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 237 |\u001b[39m         mismatchDetected\u001b[33m:\u001b[39m expectedCents \u001b[33m!==\u001b[39m paidCents\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 238 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.expectedAmountCents (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/payment-validation.test.ts\u001b[39m\u001b[0m\u001b[2m:235:9)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\payment-validation.test.ts","startTime":1768551249668,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Random Filename Generation"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Random Filename Generation should generate cryptographically random filenames","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate cryptographically random filenames"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Random Filename Generation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Random Filename Generation should generate filenames matching expected pattern","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate filenames matching expected pattern"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Random Filename Generation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Random Filename Generation should not use client-provided filenames","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should not use client-provided filenames"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Extension Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Extension Validation should map MIME types to safe extensions","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should map MIME types to safe extensions"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Extension Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Extension Validation should reject extensions not in MIME type map","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should reject extensions not in MIME type map"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Extension Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Extension Validation should not trust file extensions from client","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not trust file extensions from client"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Path Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Path Validation should detect path traversal in normalized paths","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should detect path traversal in normalized paths"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Path Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Path Validation should accept safe filenames within allowed directory","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept safe filenames within allowed directory"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Path Validation"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected substring: \u001b[32m\"public/uploads/logos\"\u001b[39m\nReceived string:    \u001b[31m\"C:\\\\Users\\\\PRO\\\\Documents\\\\GitHub\\\\fleetbackend\\\\public\\\\uploads\\\\logos\\\\platform-logo-abd7be45b60b7600e90261f5ea6ea73f.png\"\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected substring: \u001b[32m\"public/uploads/logos\"\u001b[39m\nReceived string:    \u001b[31m\"C:\\\\Users\\\\PRO\\\\Documents\\\\GitHub\\\\fleetbackend\\\\public\\\\uploads\\\\logos\\\\platform-logo-abd7be45b60b7600e90261f5ea6ea73f.png\"\u001b[39m\n    at Object.toContain (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\file-upload-security.test.ts:142:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Path Traversal Prevention (VULN-002) Path Validation should validate path before file write","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should validate path before file write"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Old File Deletion Security"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Old File Deletion Security should validate old filename pattern before deletion","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should validate old filename pattern before deletion"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Old File Deletion Security"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Old File Deletion Security should reject invalid old filename patterns","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should reject invalid old filename patterns"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Old File Deletion Security"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Old File Deletion Security should use basename to prevent path traversal in deletion","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should use basename to prevent path traversal in deletion"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Old File Deletion Security"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) Old File Deletion Security should validate deletion path is within allowed directory","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate deletion path is within allowed directory"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","File Size Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) File Size Validation should enforce 5MB file size limit","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should enforce 5MB file size limit"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","MIME Type Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Path Traversal Prevention (VULN-002) MIME Type Validation should only accept image MIME types","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should only accept image MIME types"},{"ancestorTitles":["Path Traversal Prevention (VULN-002)","Complete Security Flow"],"duration":2,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected substring: \u001b[32m\"public/uploads/logos\"\u001b[39m\nReceived string:    \u001b[31m\"C:\\\\Users\\\\PRO\\\\Documents\\\\GitHub\\\\fleetbackend\\\\public\\\\uploads\\\\logos\\\\platform-logo-293139519914dce692c92d143f49e25a.png\"\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected substring: \u001b[32m\"public/uploads/logos\"\u001b[39m\nReceived string:    \u001b[31m\"C:\\\\Users\\\\PRO\\\\Documents\\\\GitHub\\\\fleetbackend\\\\public\\\\uploads\\\\logos\\\\platform-logo-293139519914dce692c92d143f49e25a.png\"\u001b[39m\n    at Object.toContain (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\file-upload-security.test.ts:266:24)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Path Traversal Prevention (VULN-002) Complete Security Flow should implement defense in depth","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"failed","title":"should implement defense in depth"}],"endTime":1768551250128,"message":"\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mPath Traversal Prevention (VULN-002)  Path Validation  should validate path before file write\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected substring: \u001b[32m\"public/uploads/logos\"\u001b[39m\n    Received string:    \u001b[31m\"C:\\\\Users\\\\PRO\\\\Documents\\\\GitHub\\\\fleetbackend\\\\public\\\\uploads\\\\logos\\\\platform-logo-abd7be45b60b7600e90261f5ea6ea73f.png\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 140 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 141 |\u001b[39m       expect(normalizedPath\u001b[33m.\u001b[39mstartsWith(normalizedDir))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 142 |\u001b[39m       expect(filePath)\u001b[33m.\u001b[39mtoContain(\u001b[32m'public/uploads/logos'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 143 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 144 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 145 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toContain (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/file-upload-security.test.ts\u001b[39m\u001b[0m\u001b[2m:142:24)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mPath Traversal Prevention (VULN-002)  Complete Security Flow  should implement defense in depth\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected substring: \u001b[32m\"public/uploads/logos\"\u001b[39m\n    Received string:    \u001b[31m\"C:\\\\Users\\\\PRO\\\\Documents\\\\GitHub\\\\fleetbackend\\\\public\\\\uploads\\\\logos\\\\platform-logo-293139519914dce692c92d143f49e25a.png\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 264 |\u001b[39m       \u001b[90m// 5. Path should not contain traversal sequences\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 265 |\u001b[39m       expect(filePath)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[32m'..'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 266 |\u001b[39m       expect(filePath)\u001b[33m.\u001b[39mtoContain(\u001b[32m'public/uploads/logos'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 267 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 268 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 269 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toContain (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/file-upload-security.test.ts\u001b[39m\u001b[0m\u001b[2m:266:24)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\file-upload-security.test.ts","startTime":1768551249893,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["AdminService","getPlatformAnalytics"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:78:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getPlatformAnalytics should return comprehensive platform analytics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return comprehensive platform analytics"},{"ancestorTitles":["AdminService","getPlatformAnalytics"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:120:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getPlatformAnalytics should handle zero tenants gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle zero tenants gracefully"},{"ancestorTitles":["AdminService","getPlatformAnalytics"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:135:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getPlatformAnalytics should calculate growth rate correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate growth rate correctly"},{"ancestorTitles":["AdminService","getTenantAnalytics"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:156:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getTenantAnalytics should return comprehensive tenant analytics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return comprehensive tenant analytics"},{"ancestorTitles":["AdminService","getTenantAnalytics"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:185:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getTenantAnalytics should calculate profit correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate profit correctly"},{"ancestorTitles":["AdminService","getTenantAnalytics"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:203:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getTenantAnalytics should handle null aggregation values","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle null aggregation values"},{"ancestorTitles":["AdminService","getTenantAnalytics"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:219:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getTenantAnalytics should throw NotFoundError for non-existent tenant","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw NotFoundError for non-existent tenant"},{"ancestorTitles":["AdminService","updateTenantStatus"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:237:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService updateTenantStatus should update tenant status to SUSPENDED","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update tenant status to SUSPENDED"},{"ancestorTitles":["AdminService","updateTenantStatus"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:256:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService updateTenantStatus should clear suspendedAt when activating tenant","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should clear suspendedAt when activating tenant"},{"ancestorTitles":["AdminService","getTenants"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:293:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getTenants should return paginated tenants list","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return paginated tenants list"},{"ancestorTitles":["AdminService","getTenants"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:305:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getTenants should filter by status","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by status"},{"ancestorTitles":["AdminService","getTenants"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:318:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getTenants should filter by plan","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by plan"},{"ancestorTitles":["AdminService","getTenants"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:331:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getTenants should support search across name, email, slug","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support search across name, email, slug"},{"ancestorTitles":["AdminService","getTenants"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:342:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getTenants should calculate pagination correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate pagination correctly"},{"ancestorTitles":["AdminService","getSystemHealth"],"duration":9,"failureDetails":[{"matcherResult":{"actual":"down","expected":"healthy","message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"healthy\"\u001b[39m\nReceived: \u001b[31m\"down\"\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"healthy\"\u001b[39m\nReceived: \u001b[31m\"down\"\u001b[39m\n    at Object.toBe (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:364:38)"],"fullName":"AdminService getSystemHealth should return healthy status for fast database","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return healthy status for fast database"},{"ancestorTitles":["AdminService","getSystemHealth"],"duration":1,"failureDetails":[{"matcherResult":{"actual":"down","expected":"degraded","message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"d\u001b[7megraded\u001b[27m\"\u001b[39m\nReceived: \u001b[31m\"d\u001b[7mown\u001b[27m\"\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"d\u001b[7megraded\u001b[27m\"\u001b[39m\nReceived: \u001b[31m\"d\u001b[7mown\u001b[27m\"\u001b[39m\n    at Object.toBe (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:377:38)"],"fullName":"AdminService getSystemHealth should return degraded status for slow database","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return degraded status for slow database"},{"ancestorTitles":["AdminService","getSystemHealth"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThanOrEqual\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: >= \u001b[32m500\u001b[39m\nReceived:    \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThanOrEqual\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: >= \u001b[32m500\u001b[39m\nReceived:    \u001b[31m0\u001b[39m\n    at Object.toBeGreaterThanOrEqual (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:391:44)"],"fullName":"AdminService getSystemHealth should return down status for very slow database","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should return down status for very slow database"},{"ancestorTitles":["AdminService","getSystemHealth"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.$queryRaw (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:395:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getSystemHealth should return down status on database error","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return down status on database error"},{"ancestorTitles":["AdminService","getUserActivity"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:426:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getUserActivity should return paginated audit logs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return paginated audit logs"},{"ancestorTitles":["AdminService","getUserActivity"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:437:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getUserActivity should filter by userId","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by userId"},{"ancestorTitles":["AdminService","getUserActivity"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:450:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getUserActivity should filter by tenantId","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by tenantId"},{"ancestorTitles":["AdminService","getUserActivity"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.auditLog (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:466:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getUserActivity should filter by date range","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by date range"},{"ancestorTitles":["AdminService","getRevenueReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:485:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getRevenueReport should calculate total MRR correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate total MRR correctly"},{"ancestorTitles":["AdminService","getRevenueReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:501:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getRevenueReport should group revenue by plan","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should group revenue by plan"},{"ancestorTitles":["AdminService","getRevenueReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:515:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getRevenueReport should calculate lifetime value correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate lifetime value correctly"},{"ancestorTitles":["AdminService","getRevenueReport"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:523:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getRevenueReport should handle zero paying tenants","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle zero paying tenants"},{"ancestorTitles":["AdminService","getRevenueReport"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:533:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService getRevenueReport should exclude FREE plan tenants","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should exclude FREE plan tenants"},{"ancestorTitles":["AdminService","impersonateTenant"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:561:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService impersonateTenant should return tenant admin user for impersonation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return tenant admin user for impersonation"},{"ancestorTitles":["AdminService","impersonateTenant"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:572:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService impersonateTenant should throw NotFoundError for non-existent tenant","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw NotFoundError for non-existent tenant"},{"ancestorTitles":["AdminService","impersonateTenant"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\nIf this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n    at Object.get (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\.prisma\\client\\index-browser.js:993:15)\n    at Object.tenant (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts:586:15)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"AdminService impersonateTenant should throw NotFoundError when no admin user exists","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw NotFoundError when no admin user exists"}],"endTime":1768551250593,"message":"\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getPlatformAnalytics  should return comprehensive platform analytics\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 76 |\u001b[39m       ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 77 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 78 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m (args\u001b[33m?\u001b[39m\u001b[33m:\u001b[39m any) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 79 |\u001b[39m         \u001b[36mif\u001b[39m (args\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mwhere\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mstatus \u001b[33m===\u001b[39m \u001b[32m'ACTIVE'\u001b[39m) \u001b[36mreturn\u001b[39m \u001b[35m45\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 80 |\u001b[39m         \u001b[36mif\u001b[39m (args\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mwhere\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mstatus \u001b[33m===\u001b[39m \u001b[32m'SUSPENDED'\u001b[39m) \u001b[36mreturn\u001b[39m \u001b[35m5\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 81 |\u001b[39m         \u001b[36mif\u001b[39m (args\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mwhere\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcreatedAt) \u001b[36mreturn\u001b[39m \u001b[35m12\u001b[39m\u001b[33m;\u001b[39m \u001b[90m// new tenants this month\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:78:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getPlatformAnalytics  should handle zero tenants gracefully\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 118 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 119 |\u001b[39m     it(\u001b[32m'should handle zero tenants gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 120 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 121 |\u001b[39m       (prisma\u001b[33m.\u001b[39muser\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 122 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39maggregate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({ _sum\u001b[33m:\u001b[39m { monthlyRevenue\u001b[33m:\u001b[39m \u001b[36mnull\u001b[39m } })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 123 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mgroupBy \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:120:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getPlatformAnalytics  should calculate growth rate correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 133 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 134 |\u001b[39m     it(\u001b[32m'should calculate growth rate correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 135 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m (args\u001b[33m?\u001b[39m\u001b[33m:\u001b[39m any) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 136 |\u001b[39m         \u001b[36mif\u001b[39m (args\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mwhere\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcreatedAt) \u001b[36mreturn\u001b[39m \u001b[35m5\u001b[39m\u001b[33m;\u001b[39m \u001b[90m// new tenants\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 137 |\u001b[39m         \u001b[36mreturn\u001b[39m \u001b[35m100\u001b[39m\u001b[33m;\u001b[39m \u001b[90m// total tenants\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 138 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:135:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getTenantAnalytics  should return comprehensive tenant analytics\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 154 |\u001b[39m       \u001b[36mconst\u001b[39m endDate \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m(\u001b[32m'2024-12-31'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 155 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 156 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 157 |\u001b[39m         id\u001b[33m:\u001b[39m tenantId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 158 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'Test Company'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 159 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:156:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getTenantAnalytics  should calculate profit correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 183 |\u001b[39m       \u001b[36mconst\u001b[39m endDate \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m(\u001b[32m'2024-12-31'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 184 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 185 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({ id\u001b[33m:\u001b[39m tenantId })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 186 |\u001b[39m       (prisma\u001b[33m.\u001b[39mvehicle\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 187 |\u001b[39m       (prisma\u001b[33m.\u001b[39mdriver\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 188 |\u001b[39m       (prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:185:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getTenantAnalytics  should handle null aggregation values\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 201 |\u001b[39m       \u001b[36mconst\u001b[39m endDate \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m(\u001b[32m'2024-12-31'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 202 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 203 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({ id\u001b[33m:\u001b[39m tenantId })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 204 |\u001b[39m       (prisma\u001b[33m.\u001b[39mvehicle\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 205 |\u001b[39m       (prisma\u001b[33m.\u001b[39mdriver\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 206 |\u001b[39m       (prisma\u001b[33m.\u001b[39mremittance\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:203:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getTenantAnalytics  should throw NotFoundError for non-existent tenant\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 217 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 218 |\u001b[39m     it(\u001b[32m'should throw NotFoundError for non-existent tenant'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 219 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 220 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 221 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 222 |\u001b[39m         adminService\u001b[33m.\u001b[39mgetTenantAnalytics(\u001b[32m'invalid-id'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m())\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:219:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  updateTenantStatus  should update tenant status to SUSPENDED\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 235 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 236 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 237 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(updatedTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 238 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 239 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mupdateTenantStatus(tenantId\u001b[33m,\u001b[39m \u001b[32m'SUSPENDED'\u001b[39m\u001b[33m,\u001b[39m userId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 240 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:237:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  updateTenantStatus  should clear suspendedAt when activating tenant\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 254 |\u001b[39m       \u001b[36mconst\u001b[39m userId \u001b[33m=\u001b[39m \u001b[32m'admin-1'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 255 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 256 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mupdate \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue({\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 257 |\u001b[39m         id\u001b[33m:\u001b[39m tenantId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 258 |\u001b[39m         status\u001b[33m:\u001b[39m \u001b[32m'ACTIVE'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 259 |\u001b[39m         suspendedAt\u001b[33m:\u001b[39m \u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:256:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getTenants  should return paginated tenants list\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 291 |\u001b[39m       ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 292 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 293 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenants)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 294 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m25\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 295 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 296 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetTenants({ page\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m limit\u001b[33m:\u001b[39m \u001b[35m10\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:293:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getTenants  should filter by status\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 303 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 304 |\u001b[39m     it(\u001b[32m'should filter by status'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 305 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 306 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 307 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 308 |\u001b[39m       \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetTenants({ status\u001b[33m:\u001b[39m \u001b[32m'SUSPENDED'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:305:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getTenants  should filter by plan\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 316 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 317 |\u001b[39m     it(\u001b[32m'should filter by plan'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 318 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 319 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m10\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 320 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 321 |\u001b[39m       \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetTenants({ plan\u001b[33m:\u001b[39m \u001b[32m'PREMIUM'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:318:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getTenants  should support search across name, email, slug\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 329 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 330 |\u001b[39m     it(\u001b[32m'should support search across name, email, slug'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 331 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 332 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m3\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 333 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 334 |\u001b[39m       \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetTenants({ search\u001b[33m:\u001b[39m \u001b[32m'test'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:331:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getTenants  should calculate pagination correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 340 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 341 |\u001b[39m     it(\u001b[32m'should calculate pagination correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 342 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 343 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m47\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 344 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 345 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetTenants({ page\u001b[33m:\u001b[39m \u001b[35m3\u001b[39m\u001b[33m,\u001b[39m limit\u001b[33m:\u001b[39m \u001b[35m10\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:342:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getSystemHealth  should return healthy status for fast database\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m\"healthy\"\u001b[39m\n    Received: \u001b[31m\"down\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 362 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetSystemHealth()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 363 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 364 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdatabase\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'healthy'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 365 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdatabase\u001b[33m.\u001b[39mresponseTime)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 366 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 367 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:364:38)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getSystemHealth  should return degraded status for slow database\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m\"d\u001b[7megraded\u001b[27m\"\u001b[39m\n    Received: \u001b[31m\"d\u001b[7mown\u001b[27m\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 375 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetSystemHealth()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 376 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 377 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdatabase\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'degraded'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 378 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdatabase\u001b[33m.\u001b[39mresponseTime)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m150\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 379 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 380 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:377:38)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getSystemHealth  should return down status for very slow database\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeGreaterThanOrEqual\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: >= \u001b[32m500\u001b[39m\n    Received:    \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 389 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 390 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdatabase\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'down'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 391 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdatabase\u001b[33m.\u001b[39mresponseTime)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 392 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 393 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 394 |\u001b[39m     it(\u001b[32m'should return down status on database error'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBeGreaterThanOrEqual (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:391:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getSystemHealth  should return down status on database error\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 393 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 394 |\u001b[39m     it(\u001b[32m'should return down status on database error'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 395 |\u001b[39m       (prisma\u001b[33m.\u001b[39m$queryRaw \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Connection failed'\u001b[39m))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 396 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 397 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetSystemHealth()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 398 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.$queryRaw (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:395:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getUserActivity  should return paginated audit logs\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 424 |\u001b[39m       ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 425 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 426 |\u001b[39m       (prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockLogs)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 427 |\u001b[39m       (prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m150\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 428 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 429 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetUserActivity({ page\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m limit\u001b[33m:\u001b[39m \u001b[35m50\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.auditLog (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:426:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getUserActivity  should filter by userId\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 435 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 436 |\u001b[39m     it(\u001b[32m'should filter by userId'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 437 |\u001b[39m       (prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 438 |\u001b[39m       (prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 439 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 440 |\u001b[39m       \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetUserActivity({ userId\u001b[33m:\u001b[39m \u001b[32m'user-123'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.auditLog (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:437:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getUserActivity  should filter by tenantId\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 448 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 449 |\u001b[39m     it(\u001b[32m'should filter by tenantId'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 450 |\u001b[39m       (prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 451 |\u001b[39m       (prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 452 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 453 |\u001b[39m       \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetUserActivity({ tenantId\u001b[33m:\u001b[39m \u001b[32m'tenant-123'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.auditLog (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:450:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getUserActivity  should filter by date range\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 464 |\u001b[39m       \u001b[36mconst\u001b[39m endDate \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m(\u001b[32m'2024-12-31'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 465 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 466 |\u001b[39m       (prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 467 |\u001b[39m       (prisma\u001b[33m.\u001b[39mauditLog\u001b[33m.\u001b[39mcount \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 468 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 469 |\u001b[39m       \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetUserActivity({ startDate\u001b[33m,\u001b[39m endDate })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.auditLog (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:466:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getRevenueReport  should calculate total MRR correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 483 |\u001b[39m       ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 484 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 485 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenants)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 486 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 487 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetRevenueReport(\u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m())\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 488 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:485:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getRevenueReport  should group revenue by plan\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 499 |\u001b[39m       ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 500 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 501 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenants)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 502 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 503 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetRevenueReport(\u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m())\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 504 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:501:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getRevenueReport  should calculate lifetime value correctly\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 513 |\u001b[39m       ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 514 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 515 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenants)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 516 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 517 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetRevenueReport(\u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m())\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 518 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:515:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getRevenueReport  should handle zero paying tenants\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 521 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 522 |\u001b[39m     it(\u001b[32m'should handle zero paying tenants'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 523 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 524 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 525 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetRevenueReport(\u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m())\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 526 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:523:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  getRevenueReport  should exclude FREE plan tenants\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 531 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 532 |\u001b[39m     it(\u001b[32m'should exclude FREE plan tenants'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 533 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindMany \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue([])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 534 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 535 |\u001b[39m       \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mgetRevenueReport(\u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m()\u001b[33m,\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m())\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 536 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:533:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  impersonateTenant  should return tenant admin user for impersonation\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 559 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 560 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 561 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 562 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 563 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m adminService\u001b[33m.\u001b[39mimpersonateTenant(tenantId\u001b[33m,\u001b[39m adminUserId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 564 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:561:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  impersonateTenant  should throw NotFoundError for non-existent tenant\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 570 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 571 |\u001b[39m     it(\u001b[32m'should throw NotFoundError for non-existent tenant'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 572 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 573 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 574 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 575 |\u001b[39m         adminService\u001b[33m.\u001b[39mimpersonateTenant(\u001b[32m'invalid-id'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin-1'\u001b[39m)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:572:15)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mAdminService  impersonateTenant  should throw NotFoundError when no admin user exists\u001b[39m\u001b[22m\n\n    PrismaClient is unable to run in this browser environment, or has been bundled for the browser (running in `Node.js`).\n    If this is unexpected, please open an issue: https://pris.ly/prisma-prisma-bug-report\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 584 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 585 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 586 |\u001b[39m       (prisma\u001b[33m.\u001b[39mtenant\u001b[33m.\u001b[39mfindUnique \u001b[36mas\u001b[39m jest\u001b[33m.\u001b[39m\u001b[33mMock\u001b[39m)\u001b[33m.\u001b[39mmockResolvedValue(mockTenant)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 587 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 588 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 589 |\u001b[39m         adminService\u001b[33m.\u001b[39mimpersonateTenant(\u001b[32m'tenant-123'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'admin-1'\u001b[39m)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.get (\u001b[22m\u001b[2mnode_modules/.prisma/client/index-browser.js\u001b[2m:993:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.tenant (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/admin.service.test.ts\u001b[39m\u001b[0m\u001b[2m:586:15)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\admin.service.test.ts","startTime":1768551250148,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Impersonation Security (VULN-006)","Rate Limiting"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Rate Limiting should enforce 5 impersonations per 15 minutes","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should enforce 5 impersonations per 15 minutes"},{"ancestorTitles":["Impersonation Security (VULN-006)","Rate Limiting"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Rate Limiting should block 6th impersonation attempt within window","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should block 6th impersonation attempt within window"},{"ancestorTitles":["Impersonation Security (VULN-006)","Rate Limiting"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Rate Limiting should reset rate limit after window expires","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reset rate limit after window expires"},{"ancestorTitles":["Impersonation Security (VULN-006)","Concurrent Session Tracking"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Concurrent Session Tracking should allow up to 3 concurrent impersonations","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should allow up to 3 concurrent impersonations"},{"ancestorTitles":["Impersonation Security (VULN-006)","Concurrent Session Tracking"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Concurrent Session Tracking should block 4th concurrent impersonation","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should block 4th concurrent impersonation"},{"ancestorTitles":["Impersonation Security (VULN-006)","Concurrent Session Tracking"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Concurrent Session Tracking should allow new impersonation after stopping one","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow new impersonation after stopping one"},{"ancestorTitles":["Impersonation Security (VULN-006)","Concurrent Session Tracking"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Concurrent Session Tracking should track different admins separately","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should track different admins separately"},{"ancestorTitles":["Impersonation Security (VULN-006)","Concurrent Session Tracking"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Concurrent Session Tracking should clean up map when admin has no active sessions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should clean up map when admin has no active sessions"},{"ancestorTitles":["Impersonation Security (VULN-006)","Auto-Timeout"],"duration":1,"failureDetails":[{"matcherResult":{"expected":false,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mfalse\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m\n    at Object.toBe (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\impersonation-security.test.ts:228:64)\n    at Promise.then.completed (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Impersonation Security (VULN-006) Auto-Timeout should timeout impersonation after 1 hour","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should timeout impersonation after 1 hour"},{"ancestorTitles":["Impersonation Security (VULN-006)","Auto-Timeout"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Auto-Timeout should document expected duration of 1 hour","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should document expected duration of 1 hour"},{"ancestorTitles":["Impersonation Security (VULN-006)","Reason Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Reason Validation should require reason with minimum 10 characters","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should require reason with minimum 10 characters"},{"ancestorTitles":["Impersonation Security (VULN-006)","Reason Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Reason Validation should reject short reasons","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should reject short reasons"},{"ancestorTitles":["Impersonation Security (VULN-006)","Reason Validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Reason Validation should trim whitespace from reason","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should trim whitespace from reason"},{"ancestorTitles":["Impersonation Security (VULN-006)","Audit Logging"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Audit Logging should log impersonation start with full details","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should log impersonation start with full details"},{"ancestorTitles":["Impersonation Security (VULN-006)","Audit Logging"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Audit Logging should include admin details in audit log","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should include admin details in audit log"},{"ancestorTitles":["Impersonation Security (VULN-006)","Security Alerts"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Security Alerts should create security alert for impersonation","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should create security alert for impersonation"},{"ancestorTitles":["Impersonation Security (VULN-006)","Security Alerts"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Security Alerts should include all relevant IDs in alert","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should include all relevant IDs in alert"},{"ancestorTitles":["Impersonation Security (VULN-006)","Response Format"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Response Format should include expiration info in response","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should include expiration info in response"},{"ancestorTitles":["Impersonation Security (VULN-006)","Combined Security Checks"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Combined Security Checks should enforce all security measures together","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should enforce all security measures together"},{"ancestorTitles":["Impersonation Security (VULN-006)","Combined Security Checks"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Combined Security Checks should require all checks to pass","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should require all checks to pass"},{"ancestorTitles":["Impersonation Security (VULN-006)","Error Messages"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Error Messages should provide clear error for rate limit","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should provide clear error for rate limit"},{"ancestorTitles":["Impersonation Security (VULN-006)","Error Messages"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Error Messages should provide clear error for concurrent limit","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should provide clear error for concurrent limit"},{"ancestorTitles":["Impersonation Security (VULN-006)","Error Messages"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation Security (VULN-006) Error Messages should provide clear error for invalid reason","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should provide clear error for invalid reason"}],"endTime":1768551250794,"message":"\u001b[1m\u001b[31m  \u001b[1m \u001b[22m\u001b[1mImpersonation Security (VULN-006)  Auto-Timeout  should timeout impersonation after 1 hour\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mfalse\u001b[39m\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 226 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 227 |\u001b[39m       \u001b[90m// Should be cleaned up\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 228 |\u001b[39m       expect(activeImpersonations\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(adminId)\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mhas(tenantId))\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 229 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 230 |\u001b[39m       jest\u001b[33m.\u001b[39museRealTimers()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 231 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/impersonation-security.test.ts\u001b[39m\u001b[0m\u001b[2m:228:64)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\impersonation-security.test.ts","startTime":1768551250616,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Authentication Forms","SignUpForm"],"duration":128,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms SignUpForm should render all form fields","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should render all form fields"},{"ancestorTitles":["Authentication Forms","SignUpForm"],"duration":97,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms SignUpForm should validate required fields","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate required fields"},{"ancestorTitles":["Authentication Forms","SignUpForm"],"duration":540,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms SignUpForm should validate password confirmation","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate password confirmation"},{"ancestorTitles":["Authentication Forms","SignUpForm"],"duration":1590,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms SignUpForm should submit form with valid data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should submit form with valid data"},{"ancestorTitles":["Authentication Forms","SignUpForm"],"duration":1482,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms SignUpForm should handle form submission errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle form submission errors"},{"ancestorTitles":["Authentication Forms","SignUpForm"],"duration":1482,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms SignUpForm should show loading state during submission","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should show loading state during submission"},{"ancestorTitles":["Authentication Forms","LoginForm"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms LoginForm should render login form fields","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should render login form fields"},{"ancestorTitles":["Authentication Forms","LoginForm"],"duration":68,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms LoginForm should validate required fields","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate required fields"},{"ancestorTitles":["Authentication Forms","LoginForm"],"duration":607,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms LoginForm should submit form with valid data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should submit form with valid data"},{"ancestorTitles":["Authentication Forms","LoginForm"],"duration":606,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms LoginForm should handle login errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle login errors"},{"ancestorTitles":["Authentication Forms","LoginForm"],"duration":590,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms LoginForm should show loading state during submission","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should show loading state during submission"},{"ancestorTitles":["Authentication Forms","LoginForm"],"duration":63,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Forms LoginForm should toggle remember me checkbox","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should toggle remember me checkbox"}],"endTime":1768551258619,"message":"","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\components\\auth-forms.test.tsx","startTime":1768551250812,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Super Admin Dashboard"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Super Admin Dashboard should render dashboard with loading state initially","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should render dashboard with loading state initially"},{"ancestorTitles":["Super Admin Dashboard"],"duration":88,"failureDetails":[],"failureMessages":[],"fullName":"Super Admin Dashboard should render KPI cards when data is loaded","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should render KPI cards when data is loaded"},{"ancestorTitles":["Super Admin Dashboard"],"duration":85,"failureDetails":[],"failureMessages":[],"fullName":"Super Admin Dashboard should render alerts section","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should render alerts section"},{"ancestorTitles":["Super Admin Dashboard"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"Super Admin Dashboard should render recent activity section","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should render recent activity section"},{"ancestorTitles":["Super Admin Dashboard"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"Super Admin Dashboard should handle API errors gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle API errors gracefully"},{"ancestorTitles":["Super Admin Dashboard"],"duration":32,"failureDetails":[],"failureMessages":[],"fullName":"Super Admin Dashboard should display change indicators for KPI cards","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should display change indicators for KPI cards"},{"ancestorTitles":["Super Admin Dashboard"],"duration":57,"failureDetails":[],"failureMessages":[],"fullName":"Super Admin Dashboard should render empty states when no data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should render empty states when no data"}],"endTime":1768551259517,"message":"","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\components\\dashboard.test.tsx","startTime":1768551258654,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Webhook Security (VULN-004)","Rate Limiting"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Rate Limiting should allow first request","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow first request"},{"ancestorTitles":["Webhook Security (VULN-004)","Rate Limiting"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Rate Limiting should allow requests under limit","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"should allow requests under limit"},{"ancestorTitles":["Webhook Security (VULN-004)","Rate Limiting"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Rate Limiting should block requests over limit","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should block requests over limit"},{"ancestorTitles":["Webhook Security (VULN-004)","Rate Limiting"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Rate Limiting should reset after time window","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reset after time window"},{"ancestorTitles":["Webhook Security (VULN-004)","Rate Limiting"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Rate Limiting should track different IPs separately","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should track different IPs separately"},{"ancestorTitles":["Webhook Security (VULN-004)","Rate Limiting"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Rate Limiting should enforce exactly 100 requests per minute","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should enforce exactly 100 requests per minute"},{"ancestorTitles":["Webhook Security (VULN-004)","Replay Attack Protection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Replay Attack Protection should allow first webhook","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow first webhook"},{"ancestorTitles":["Webhook Security (VULN-004)","Replay Attack Protection"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Replay Attack Protection should detect duplicate webhook","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should detect duplicate webhook"},{"ancestorTitles":["Webhook Security (VULN-004)","Replay Attack Protection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Replay Attack Protection should detect replayed webhook with older timestamp","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should detect replayed webhook with older timestamp"},{"ancestorTitles":["Webhook Security (VULN-004)","Replay Attack Protection"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Replay Attack Protection should allow webhook with newer timestamp","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow webhook with newer timestamp"},{"ancestorTitles":["Webhook Security (VULN-004)","Replay Attack Protection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Replay Attack Protection should track different references independently","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should track different references independently"},{"ancestorTitles":["Webhook Security (VULN-004)","Replay Attack Protection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Replay Attack Protection should clean up old entries after 1 hour","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should clean up old entries after 1 hour"},{"ancestorTitles":["Webhook Security (VULN-004)","Replay Attack Protection"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Replay Attack Protection should handle concurrent webhooks correctly","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"should handle concurrent webhooks correctly"},{"ancestorTitles":["Webhook Security (VULN-004)","Combined Rate Limiting and Replay Protection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Combined Rate Limiting and Replay Protection should enforce both rate limit and replay protection","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should enforce both rate limit and replay protection"},{"ancestorTitles":["Webhook Security (VULN-004)","Combined Rate Limiting and Replay Protection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Combined Rate Limiting and Replay Protection should block rate limited client even with valid webhooks","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should block rate limited client even with valid webhooks"},{"ancestorTitles":["Webhook Security (VULN-004)","IP Extraction and Fingerprinting"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) IP Extraction and Fingerprinting should extract IP from x-forwarded-for header","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should extract IP from x-forwarded-for header"},{"ancestorTitles":["Webhook Security (VULN-004)","IP Extraction and Fingerprinting"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) IP Extraction and Fingerprinting should extract IP from x-real-ip header","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should extract IP from x-real-ip header"},{"ancestorTitles":["Webhook Security (VULN-004)","IP Extraction and Fingerprinting"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) IP Extraction and Fingerprinting should handle missing headers gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle missing headers gracefully"},{"ancestorTitles":["Webhook Security (VULN-004)","IP Extraction and Fingerprinting"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) IP Extraction and Fingerprinting should handle IPv6 addresses","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle IPv6 addresses"},{"ancestorTitles":["Webhook Security (VULN-004)","Logging and Forensics"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Logging and Forensics should log webhook receipt with client IP","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log webhook receipt with client IP"},{"ancestorTitles":["Webhook Security (VULN-004)","Logging and Forensics"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Logging and Forensics should log rate limit exceedances","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log rate limit exceedances"},{"ancestorTitles":["Webhook Security (VULN-004)","Logging and Forensics"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Logging and Forensics should log replay attack detections","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log replay attack detections"},{"ancestorTitles":["Webhook Security (VULN-004)","Security Headers"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Security (VULN-004) Security Headers should return rate limit headers","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return rate limit headers"}],"endTime":1768551259764,"message":"","name":"C:\\Users\\PRO\\Documents\\GitHub\\fleetbackend\\tests\\unit\\webhook-security.test.ts","startTime":1768551259562,"status":"passed","summary":""}],"wasInterrupted":false}
